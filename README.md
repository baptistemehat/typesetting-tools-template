# Typesetting tools template repo

This template repository provides the necessary boilerplate configuration for starting a typesetting project with the set of tools provides by `baptistemehat/typesetting-tools`

The template repository includes:
* a set a directories to organise your work:
    * `src/` to place you source files (markdown, latex, images, etc.)
    * `build/`, which will be generated by the typestting tools and will contain the generated pdf/html documents
* a `compose.yaml` file that sets up volumes and working directories for you,
* a `justfile` containing various "default" recipes for generating pdf and html files from you sources


## Usage

1. Build the image and run the container:
```sh
docker compose up -d
```
The configuration of the container can be found in the docker compose file `compose.yaml`.

By default, the container is named `typesetting` and the whole project directory is mounted into the container, under `/typesetting`.
This means the `src/` and (yet to be generated) `build/` directories present at the root of the project, are mounted to `/typesetting/src` and `/typesetting/build` respectively.

2. Attach a shell to the container
```sh
docker exec -it typesetting bash
```
This command will attach your current shell to the container, enabling you to run command inside the container.

Upon executing this command, you should see a prompt similar to:
```
root@e537496129f2:/typesetting#
```
It means you successfully attached your shell to the container and are now in the directory `/typesetting`.

3. Run typesetting tools

From there, you now have access to the typesetting tools provided by the docker image (see the [dockerhub page of the image](https://hub.docker.com/repository/docker/baptistemehat/typesetting-tools/) for details on what is included).

Below are come example commands you can run within the container to use the provided tools.

### Example commands

**`pdflatex`: generate pdf from latex:**
```sh
pdflatex src/main.tex -output-directory=build/
```

**`marp`: generate pdf slide deck from markdown files:**
```sh
marp --input-dir=/typesetting/src --output=/typesetting/build --pdf 
```

**`pandoc`: convert files from a typesetting format to another:**
```sh
pandoc --from markdown --to latex src/main.md --output build/main.tex
```

> **Note**: the `just` task runner is also installed on the docker image, meaning you can define just recipes in justfiles for automation.
An example justfile is provided in this repo, with example recipes for generating slide decks with `marp`.

## Troubleshooting
### *The container "/typesetting" is already in use by container ...*
You may encounter this error message when running:
```sh
docker compose up -d
```
In this case, the error would look something like this:
```
Error response from daemon: Conflict. The container name "/typesetting" is already in use by container "9cb...f81". You have to remove (or rename) that container to be able to reuse that name.
```

This error happens because `docker compose` tries to spawn a new container with a similar name to an existing container. To solve the issue, simply remove the container named `typesetting` and rerun the `docker compose up -d` command:


```sh
docker rm typesetting
docker compose up -d
```
